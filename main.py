import os
import telebot
from flask import Flask, request
from threading import Thread
import time
import requests
import logging
from waitress import serve

# --- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–æ–≤ ---
logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    level=logging.INFO
)

app = Flask(__name__)
token = os.getenv("TELEGRAM_TOKEN")

if not token:
    logging.error("‚ùå TELEGRAM_TOKEN –Ω–µ –Ω–∞–π–¥–µ–Ω. –î–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ Environment Variables –Ω–∞ Render!")
    exit(1)

bot = telebot.TeleBot(token)
WEBHOOK_URL = f"https://{os.getenv('RENDER_SERVICE_NAME')}.onrender.com/{token}"
PORT = int(os.getenv("PORT", 8080))

# --- –ê–≤—Ç–æ–ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ ---
def ping_server():
    while True:
        try:
            requests.get(f"https://{os.getenv('RENDER_SERVICE_NAME')}.onrender.com")
            logging.info("üîÑ –ü–∏–Ω–≥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω")
        except Exception as e:
            logging.error(f"‚ùå –û—à–∏–±–∫–∞ –ø–∏–Ω–≥–∞: {e}")
        time.sleep(300)

# --- –í–µ–±—Ö—É–∫–∏ ---
@app.route("/")
def home():
    return "–ë–æ—Ç –∞–∫—Ç–∏–≤–µ–Ω! –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: UptimeRobot + Render"

@app.route(f"/{token}", methods=['POST'])
def webhook():
    if request.headers.get('content-type') == 'application/json':
        json_data = request.get_data().decode('utf-8')
        update = telebot.types.Update.de_json(json_data)
        bot.process_new_updates([update])
        return "OK", 200
    return "Forbidden", 403

# --- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ ---
@bot.message_handler(commands=["start"])
def start(message):
    try:
        markup = telebot.types.ReplyKeyboardMarkup(row_width=2, resize_keyboard=True)
        buttons = ["–ö–∞—Ç–∞–ª–æ–≥", "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∫ —Ç–æ–≤–∞—Ä–∞–º", "–ò–ò-–ø–æ–º–æ—â–Ω–∏–∫", "–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è"]
        markup.add(*[telebot.types.KeyboardButton(btn) for btn in buttons])
        bot.send_message(message.chat.id, "–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:", reply_markup=markup)
    except Exception as e:
        logging.error(f"‚ùå –û—à–∏–±–∫–∞ –≤ /start: {e}")

@bot.message_handler(func=lambda message: True)
def handle_buttons(message):
    try:
        if message.text == "–ö–∞—Ç–∞–ª–æ–≥":
            bot.send_message(message.chat.id, "üîó –°—Å—ã–ª–∫–∞ –Ω–∞ –∫–∞—Ç–∞–ª–æ–≥: [–≤–∞—à_—Å–∞–π—Ç]")

        elif message.text == "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∫ —Ç–æ–≤–∞—Ä–∞–º":
            markup = telebot.types.ReplyKeyboardMarkup(row_width=1, resize_keyboard=True)
            items = ["–õ–ê–í–ê–ù–î–ê", "–ë–ï–†–ì–ê–ú–û–¢", "–ú–Ø–¢–ê", "–ú–ò–ö–°", "–ù–∞–∑–∞–¥"]
            markup.add(*[telebot.types.KeyboardButton(item) for item in items])
            bot.send_message(message.chat.id, "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≤–∞—Ä:", reply_markup=markup)

        elif message.text == "–ò–ò-–ø–æ–º–æ—â–Ω–∏–∫":
            bot.send_message(message.chat.id, "–ù–∞–ø–∏—à–∏—Ç–µ –≤–æ–ø—Ä–æ—Å (–ø—Ä–∏–º–µ—Ä: '–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∞—Å–ª–æ —á–∞–π–Ω–æ–≥–æ –¥–µ—Ä–µ–≤–∞?')")

        elif message.text == "–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è":
            bot.send_message(message.chat.id, "üí¨ –û–ø–∏—à–∏—Ç–µ –≤–æ–ø—Ä–æ—Å, —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –æ—Ç–≤–µ—Ç–∏—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 30 –º–∏–Ω—É—Ç")

        elif message.text == "–õ–ê–í–ê–ù–î–ê":
            instructions = """üåø <b>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∫ –õ–ê–í–ê–ù–î–ï</b>

–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –≤—ã–±—Ä–∞–ª–∏ –Ω–∞—à –ø—Ä–æ–¥—É–∫—Ç! –ü–µ—Ä–µ–¥ –≤–∞–º–∏ 100% –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–æ–µ —ç—Ñ–∏—Ä–Ω–æ–µ –º–∞—Å–ª–æ –ª–∞–≤–∞–Ω–¥—ã —Ö–æ–ª–æ–¥–Ω–æ–≥–æ –æ—Ç–∂–∏–º–∞, –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ –º–µ—Ç–æ–¥–æ–º –ø–∞—Ä–æ–≤–æ–π –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏.
–ù–∞—à–µ –º–∞—Å–ª–æ –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∞—Ä–æ–º–∞—Ç–µ—Ä–∞–ø–∏–∏, —É—Ö–æ–¥–∞ –∑–∞ –∫–æ–∂–µ–π –∏ —Å–æ–∑–¥–∞–Ω–∏—è –≥–∞—Ä–º–æ–Ω–∏–∏ –∞—Ç–º–æ—Å—Ñ–µ—Ä—ã.

üîπ<b>–û—Å–Ω–æ–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è</b>
1. <b>–ê—Ä–æ–º–∞—Ç–µ—Ä–∞–ø–∏—è</b>
   ‚Ä¢ –ê—Ä–æ–º–∞–ª–∞–º–ø–∞/–¥–∏—Ñ—Ñ—É–∑–æ—Ä: 3-5 –∫–∞–ø–µ–ª—å –Ω–∞ 15 –º¬≤.
     –≠—Ñ—Ñ–µ–∫—Ç: —Å–Ω—è—Ç–∏–µ —Å—Ç—Ä–µ—Å—Å–∞, —É–ª—É—á—à–µ–Ω–∏–µ —Å–Ω–∞.
   ‚Ä¢ –ò–Ω–≥–∞–ª—è—Ü–∏–∏: 1-2 –∫–∞–ø–ª–∏ –≤ –º–∏—Å–∫—É —Å –≥–æ—Ä—è—á–µ–π –≤–æ–¥–æ–π (–Ω–∞–∫—Ä–æ–π—Ç–µ –≥–æ–ª–æ–≤—É –ø–æ–ª–æ—Ç–µ–Ω—Ü–µ–º, 5 –º–∏–Ω—É—Ç).
     –ï—Å—Ç—å –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–∫–∞–∑–∞–Ω–∏—è: –∞—Å—Ç–º–∞, –∞–ª–ª–µ—Ä–≥–∏—è.

2. <b>–ö–æ—Å–º–µ—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</b>
   ‚Ä¢ –û–±–æ–≥–∞—â–µ–Ω–∏–µ –∫–æ—Å–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ä–µ–¥—Å—Ç–≤: 2-3 –∫–∞–ø–ª–∏ –Ω–∞ 10 –º–ª –∫—Ä–µ–º–∞/—à–∞–º–ø—É–Ω—è.
   ‚Ä¢ –ú–∞—Å—Å–∞–∂–Ω–æ–µ –º–∞—Å–ª–æ: 5 –∫–∞–ø–µ–ª—å –Ω–∞ 10 –º–ª –±–∞–∑–æ–≤–æ–≥–æ –º–∞—Å–ª–∞ (–ø–µ—Ä—Å–∏–∫–æ–≤–æ–µ, –º–∏–Ω–¥–∞–ª—å–Ω–æ–µ, –≤–∏–Ω–æ–≥—Ä–∞–¥–Ω–æ–π –∫–æ—Å—Ç–æ—á–∫–∏).
   ‚Ä¢ –°–ø–∞-–≤–∞–Ω–Ω–∞: 5-7 –∫–∞–ø–µ–ª—å + 1 —Å—Ç.–ª. —ç–º—É–ª—å–≥–∞—Ç–æ—Ä–∞ (–º–æ–ª–æ–∫–æ, –º–æ—Ä—Å–∫–∞—è —Å–æ–ª—å).
     <b>–í–∞–∂–Ω–æ!</b> –ù–µ –Ω–∞–Ω–æ—Å–∏—Ç–µ —á–∏—Å—Ç–æ–µ –º–∞—Å–ª–æ –Ω–∞ –∫–æ–∂—É ‚Äì –≤–æ–∑–º–æ–∂–µ–Ω –æ–∂–æ–≥.

3. <b>–ë—ã—Ç–æ–≤–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ</b>
   ‚Ä¢ –ê—Ä–æ–º–∞—Å–∞—à–µ: 2-3 –∫–∞–ø–ª–∏ –Ω–∞ –¥–µ—Ä–µ–≤—è–Ω–Ω—É—é/–∫–µ—Ä–∞–º–∏—á–µ—Å–∫—É—é –ø–æ–¥–≤–µ—Å–∫—É –∏–ª–∏ –≥–∏–ø—Å–æ–≤–æ–µ —Å–∞—à–µ.
   ‚Ä¢ –î–µ–∑–æ–¥–æ—Ä–∞—Ü–∏—è –±–µ–ª—å—è: 5 –∫–∞–ø–µ–ª—å –Ω–∞ —Å–∞–ª—Ñ–µ—Ç–∫—É –≤ —à–∫–∞—Ñ—É.
   ‚Ä¢ –ê–Ω—Ç–∏—Å–µ–ø—Ç–∏–∫: 10 –∫–∞–ø–µ–ª—å + 100 –º–ª –≤–æ–¥—ã –≤ —Å–ø—Ä–µ–µ (–æ–±—Ä–∞–±–æ—Ç–∞–π—Ç–µ –¥–≤–µ—Ä–Ω—ã–µ —Ä—É—á–∫–∏, –≥–∞–¥–∂–µ—Ç—ã).

‚ö†Ô∏è <b>–ú–µ—Ä—ã –ø—Ä–µ–¥–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏</b>
   ‚Ä¢ –¢–µ—Å—Ç –Ω–∞ –∞–ª–ª–µ—Ä–≥–∏—é: –Ω–∞–Ω–µ—Å–∏—Ç–µ 1 –∫–∞–ø–ª—é, —Ä–∞–∑–≤–µ–¥–µ–Ω–Ω—É—é –≤ –±–∞–∑–æ–≤–æ–º –º–∞—Å–ª–µ, –Ω–∞ –∑–∞–ø—è—Å—Ç—å–µ.
   ‚Ä¢ –•—Ä–∞–Ω–µ–Ω–∏–µ: —Ñ–ª–∞–∫–æ–Ω –∏–∑ —Ç–µ–º–Ω–æ–≥–æ —Å—Ç–µ–∫–ª–∞ –ø—Ä–∏ +15...+20¬∞–° (–¥–æ–ø—É—Å—Ç–∏–º–æ +5...+25¬∞–°).
     ‚ñ∏ –ü—Ä–∏ –∑–∞–º–µ—Ä–∑–∞–Ω–∏–∏ (–Ω–∏–∂–µ +5¬∞C) —É—Ö—É–¥—à–∞—é—Ç—Å—è —Å–≤–æ–π—Å—Ç–≤–∞.
     ‚ñ∏ –ü—Ä–∏ –ø–µ—Ä–µ–≥—Ä–µ–≤–µ (–≤—ã—à–µ +25¬∞C) –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–µ–∑–∫–æ–µ –æ–∫–∏—Å–ª–µ–Ω–∏–µ.
   ‚Ä¢ <b>–ó–∞–ø—Ä–µ—â–µ–Ω–æ</b>:
     ‚ñ∏ –ë–µ—Ä–µ–º–µ–Ω–Ω—ã–º –≤ I —Ç—Ä–∏–º–µ—Å—Ç—Ä–µ
     ‚ñ∏ –î–µ—Ç—è–º –¥–æ 7 –ª–µ—Ç (–¥–ª—è 1-7 –ª–µ—Ç - —Ç–æ–ª—å–∫–æ 1 –∫–∞–ø–ª—è –Ω–∞ 2 —Å—Ç.–ª. –æ—Å–Ω–æ–≤—ã)
     ‚ñ∏ –ü—Ä–∏ —ç–ø–∏–ª–µ–ø—Å–∏–∏ –∏ –≥–∏–ø–æ—Ç–æ–Ω–∏–∏

üí° <b>–õ–∞–π—Ñ—Ö–∞–∫–∏ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞</b>
   ‚Ä¢ –≠–∫—Å–ø—Ä–µ—Å—Å-—Ä–µ–ª–∞–∫—Å: –Ω–∞–Ω–µ—Å–∏—Ç–µ –ø–∞—Ä—É –∫–∞–ø–µ–ª—å –º–∞—Å–ª–∞ –Ω–∞ —Å–∞–ª—Ñ–µ—Ç–∫—É –∏–ª–∏ –≤–∞—Ç–Ω—ã–π –¥–∏—Å–∫, –≤–¥—ã—Ö–∞–π—Ç–µ –∞—Ä–æ–º–∞—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 30 —Å–µ–∫—É–Ω–¥.
   ‚Ä¢ –°–æ–Ω, –∫–∞–∫ —É —Ä–µ–±–µ–Ω–∫–∞: –ø–æ–ª–æ–∂–∏—Ç–µ —Å–∞–ª—Ñ–µ—Ç–∫—É —Å –ø–∞—Ä–æ–π –∫–∞–ø–µ–ª—å –º–∞—Å–ª–∞ —Ä—è–¥–æ–º —Å –ø–æ–¥—É—à–∫–æ–π. –ù–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å –∑–¥–æ—Ä–æ–≤—ã–º —Å–Ω–æ–º!
   ‚Ä¢ –ê–ø—Ç–µ—á–∫–∞ –ø—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞: —Å–º–µ—à–∞–π—Ç–µ 10 –∫–∞–ø–µ–ª—å –ª–∞–≤–∞–Ω–¥—ã + 10 –∫–∞–ø–µ–ª—å –º—è—Ç—ã –≤ —Ä–æ–ª–ª–µ—Ä–µ —Å –º–∞—Å–ª–æ–º-–æ—Å–Ω–æ–≤–æ–π (–º–∏–Ω–¥–∞–ª—å–Ω–æ–µ, –ø–µ—Ä—Å–∏–∫–æ–≤–æ–µ, –≤–∏–Ω–æ–≥—Ä–∞–¥–Ω–æ–π –∫–æ—Å—Ç–æ—á–∫–∏).
   ‚Ä¢ –ê—Ä–æ–º–∞—Ç–∏–∑–∞—Ç–æ—Ä –∏ –∞–Ω—Ç–∏—Å–µ–ø—Ç–∏–∫ –¥–ª—è —É–±–æ—Ä–∫–∏: 5‚Äì7 –∫–∞–ø–µ–ª—å –≤ –≤–µ–¥—Ä–æ –≤–æ–¥—ã –ø—Ä–∏ –º—ã—Ç—å–µ –ø–æ–ª–æ–≤.
   ‚Ä¢ –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –ø–æ–º–æ—â—å –ø—Ä–∏ –æ–∂–æ–≥–∞—Ö: —Ç–æ—á–µ—á–Ω–æ –Ω–∞–Ω–µ—Å–∏—Ç–µ —á–∏—Å—Ç—É—é –∫–∞–ø–ª—é (—Ç–æ–ª—å–∫–æ –¥–ª—è –≤–∑—Ä–æ—Å–ª—ã—Ö!).
   ‚Ä¢ –†–µ–ø–µ–ª–ª–µ–Ω—Ç —Å–≤–æ–∏–º–∏ —Ä—É–∫–∞–º–∏: 10 –∫–∞–ø–µ–ª—å –ª–∞–≤–∞–Ω–¥—ã + 10 –∫–∞–ø–µ–ª—å —Ü–∏—Ç—Ä–æ–Ω–µ–ª–ª—ã –Ω–∞ 100 –º–ª –≤–æ–¥—ã.
   ‚Ä¢ –°–ü–ê –¥–ª—è –≤–æ–ª–æ—Å: 3 –∫–∞–ø–ª–∏ + 2 —Å—Ç.–ª. —Ä–µ–ø–µ–π–Ω–æ–≥–æ –º–∞—Å–ª–∞ –Ω–∞ –∫–æ—Ä–Ω–∏ –Ω–∞ 40 –º–∏–Ω—É—Ç.

üåê <b>–ú—ã –≤—Å–µ–≥–¥–∞ –Ω–∞ —Å–≤—è–∑–∏</b>
   ‚Ä¢ –•–æ—Ç–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã? –ü–∏—à–∏—Ç–µ –Ω–∞ –Ω–∞—à Telegram-–∫–∞–Ω–∞–ª Jemm - –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ –ø—É–±–ª–∏–∫—É–µ–º –∞–≤—Ç–æ—Ä—Å–∫–∏–µ —Å–º–µ—Å–∏ –º–∞—Å–µ–ª.
   ‚Ä¢ –í–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –Ω–∞—à–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π –ø–æ –∞—Ä–æ–º–∞—Ç–µ—Ä–∞–ø–∏–∏ –ø–æ–ª—É—á–∏—Ç–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ —Å–≤–æ–∏ –≤–æ–ø—Ä–æ—Å—ã –≤ —Ñ–æ—Ä–º–µ –≤–æ–ø—Ä–æ—Å-–æ—Ç–≤–µ—Ç –≤ –±–æ—Ç–µ Aroma_Bot
   ‚Ä¢ –ó–∞–¥–∞–π—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å, –∏ –º—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏, —á—Ç–æ–±—ã –ø–æ–º–æ—á—å üåø

üìå <b>–ü–æ—á–µ–º—É –≤—ã–±–∏—Ä–∞—é—Ç –Ω–∞—Å?</b>
   ‚ñ∏ –•–æ–ª–æ–¥–Ω—ã–π –æ—Ç–∂–∏–º ‚Äì —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –º–∞–∫—Å–∏–º—É–º –ø–æ–ª–µ–∑–Ω—ã—Ö —Å–≤–æ–π—Å—Ç–≤.
   ‚ñ∏ –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã ECOCERT ‚Äì –≥–∞—Ä–∞–Ω—Ç–∏—è —á–∏—Å—Ç–æ—Ç—ã —Å–æ—Å—Ç–∞–≤–∞.
   ‚ñ∏ –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å: –Ω–∞ —Å–∞–π—Ç–µ - –æ—Ç—á–µ—Ç –ì–•-–ú–° –ø–æ –∫–∞–∂–¥–æ–π –ø–∞—Ä—Ç–∏–∏.

–ü–°. –ü—Ä–∏ –ø–æ–∫—É–ø–∫–µ –æ—Ç 3-—Ö —Ñ–ª–∞–∫–æ–Ω–æ–≤ - –º–∏–Ω–∏-–≥–∏–¥ –ø–æ –∞—Ä–æ–º–∞—Ç–µ—Ä–∞–ø–∏–∏ –≤ –ø–æ–¥–∞—Ä–æ–∫!
–ü—Ä–∏ –ø–æ–∫—É–ø–∫–µ 2-—Ö —Ñ–ª–∞–∫–æ–Ω–æ–≤ - —á–µ–∫-–ª–∏—Å—Ç "7 –Ω–µ–æ—á–µ–≤–∏–¥–Ω—ã—Ö —Å–ø–æ—Å–æ–±–æ–≤ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —ç—Ñ–∏—Ä–Ω—ã—Ö –º–∞—Å–µ–ª".

–ö–æ–º–∞–Ω–¥–∞ –î–∂–µ–º–º. –í–∞—à–µ –∑–¥–æ—Ä–æ–≤—å–µ - –Ω–∞—à–∞ –º–∏—Å—Å–∏—è.
"""

            markup = telebot.types.ReplyKeyboardMarkup(resize_keyboard=True)
            markup.add(telebot.types.KeyboardButton("–ù–∞–∑–∞–¥ –∫ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º"))
            bot.send_message(message.chat.id, instructions, parse_mode='HTML', reply_markup=markup)

        elif message.text == "–ù–∞–∑–∞–¥ –∫ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º":
            markup = telebot.types.ReplyKeyboardMarkup(row_width=1, resize_keyboard=True)
            markup.add(*[telebot.types.KeyboardButton(item) for item in ["–õ–ê–í–ê–ù–î–ê", "–ë–ï–†–ì–ê–ú–û–¢", "–ú–Ø–¢–ê", "–ú–ò–ö–°", "–ù–∞–∑–∞–¥ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"]])
            bot.send_message(message.chat.id, "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≤–∞—Ä:", reply_markup=markup)

        elif message.text == "–ù–∞–∑–∞–¥ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é":
            markup = telebot.types.ReplyKeyboardMarkup(row_width=2, resize_keyboard=True)
            markup.add(*[telebot.types.KeyboardButton(btn) for btn in ["–ö–∞—Ç–∞–ª–æ–≥", "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∫ —Ç–æ–≤–∞—Ä–∞–º", "–ò–ò-–ø–æ–º–æ—â–Ω–∏–∫", "–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è"]])
            bot.send_message(message.chat.id, "–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:", reply_markup=markup)

    except Exception as e:
        logging.error(f"‚ùå –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–Ω–æ–ø–∫–∏: {e}")

def run_flask():
    serve(app, host="0.0.0.0", port=PORT)

if __name__ == "__main__":
    try:
        bot.remove_webhook()
        time.sleep(1)
        bot.set_webhook(url=WEBHOOK_URL)
        
        Thread(target=ping_server, daemon=True).start()
        run_flask()

    except Exception as e:
        logging.critical(f"üí• –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: {e}")